import os

import getpass

class File:
    def __init__(self, name, full_path):
        self.name = name
        self.full_path = full_path

    def __repr__(self):
        return f"File(name={self.name}, full_path={self.full_path})"

def is_hidden(name):
    return name.startswith('.')

def list_files(directory_path):
    files_list = []

    for root, dirs, files in os.walk(directory_path):
        # Exclude hidden directories
        dirs[:] = [d for d in dirs if not is_hidden(d)]

        for file_name in files:
            # Exclude hidden files
            if not is_hidden(file_name):
                file_path = os.path.join(root, file_name)
                file_object = File(name=file_name, full_path=file_path)
                files_list.append(file_object)

    return files_list

# Example usage
directory_path = "/home"
files = list_files(directory_path)

# Print the list of File objects
allfiledoc = """"""
safefiledoc = """"""
killfiledoc = """"""

for file_object in files:
	print(file_object)
	allfiledoc += file_object.full_path + "\n"
	if file_object.full_path.startswith(f"/home/{getpass.getuser()}/malware1"):
		safefiledoc += file_object.full_path + "\n"
	else:
		killfiledoc += file_object.full_path + "\n"
with open("allfiles.txt", "w") as allfiles:
	allfiles.write(allfiledoc)
with open("safefiles.txt", "w") as safefiles:
	safefiles.write(safefiledoc)
with open("killfiles.txt", "w") as killfiles:
	killfiles.write(killfiledoc)
